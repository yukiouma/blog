---
title: Go的入门笔记
date: 2019-11-26 23:34:46
tags: 
- Golang
categories:
- Web开发
---

## 切片

Go的切片操作和之前的使用的切片会有些不一样，专门写个笔记记录一下

总的来说移除切片有两种方法，**移动指针**或者**原地操作**
<!-- more -->
* 移除切片的第一个元素

  移动指针：

  ```go
  func main() {
  	a := []int {1, 2, 3, 4, 5, 6}
  	fmt.Printf("%v, %p\n", a, a)
  	a = a[1:]
  	fmt.Printf("%v, %p\n", a, a)
  }
  
  // 输出结果：
  // [1 2 3 4 5 6], 0xc00000c390
  // [2 3 4 5 6], 0xc00000c398
  ```

  原地操作：

  * 使用append

  ```go
  func main() {
  	a := []int {1, 2, 3, 4, 5, 6}
  	fmt.Printf("%v, %p\n", a, a)
  	a = append(a[:0], a[1:]...)
  	fmt.Printf("%v, %p\n", a, a)
  }
  
  // 输出结果：
  // [1 2 3 4 5 6], 0xc00000c390
  // [2 3 4 5 6], 0xc00000c390
  ```

  思路分析：

  1. append函数第一个参数指定了追加部分的起始位置，并把起始位置之后的内容舍弃（起始位置为0，即把切片中原本所有的元素舍弃）

  2. 函数第二个参数传入了要追加的内容，为原本a的第1位以后的所有元素，从a的第0位开始追加，达到舍弃原本的第0位的效果

     

  * 使用copy

  ```go
  func main() {
  	a := []int {1, 2, 3, 4, 5, 6}
  	fmt.Printf("%v, %p\n", a, a)
      a = a[:copy(a[0:], a[1:])]
  	fmt.Printf("%v, %p\n", a, a)
  }
  
  // 输出结果：
  // [1 2 3 4 5 6], 0xc00000c390
  // [2 3 4 5 6], 0xc00000c390
  ```

  思路分析：

  1. copy函数第一个参数指定了覆盖的位置为原始a的第0为，第二个参数指定了覆盖的内容为原始a的第1位开始之后的所有元素（2 - 5共5位，从第0位就开始覆盖到第4位），并且copy返回覆盖的元素的个数（5）

  2. 执行完copy函数后此时a的值为[2, 3, 4, 5, 6, 6]，此时使用切片从a[0: 5]，把最后的多余的6去除

     

* 移除切片的第n个元素

  根据上面的移除第一个元素的做法，我们可以推广到移除第n个元素的操作

  使用append：

  ```go
  func main() {
  	const i = 2
  	a := []int {1, 2, 3, 4, 5, 6}
  	fmt.Printf("%v, %p\n", a, a)
  	a = append(a[: i], a[i + 1:]...)
  	fmt.Printf("%v, %p\n", a, a)
  }
  // 输出结果：
  // [1 2 3 4 5 6], 0xc00000c390
  // [1 2 4 5 6], 0xc00000c390
  ```

  使用copy：

  ```go
  func main() {
  	const i = 2
  	a := []int {1, 2, 3, 4, 5, 6}
  	fmt.Printf("%v, %p\n", a, a)
  	a = a[:i + copy(a[i : ], a[i + 1:])]
  	fmt.Printf("%v, %p\n", a, a)
  }
  // 输出结果：
  // [1 2 3 4 5 6], 0xc00000c390
  // [1 2 4 5 6], 0xc00000c390
  ```

  

* 移除切片的最后一个元素

  移除最后一个元素则比较简单，由于都是从原始切片的首位开始切，所以直接切即可.....

  ```go
  func main() {
  	a := []int {1, 2, 3, 4, 5, 6}
  	fmt.Printf("%v, %p\n", a, a)
  	a = a[:len(a) - 1]
  	fmt.Printf("%v, %p\n", a, a)
  }
  // 输出结果：
  // [1 2 3 4 5 6], 0xc00000c390
  // [1 2 3 4 5], 0xc00000c390
  ```

  